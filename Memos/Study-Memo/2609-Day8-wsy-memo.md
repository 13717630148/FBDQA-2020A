### 第八讲总结

#### 量化交易——经典资金管理模型以及股票池筛选的量化避险问题讨论

- 资金管理模型

  - 策略成败的三个核心变量

    - 方向：涨 or 跌
    - 时机：信号
    - 头寸：**最终决定赚多赚少的因素**

  - 模型1:每一固定金额交易一个单位

    - 问题：不同标的的资金利用差很多
    - 缺点太致命了，一般不用

  - 模型2:等价值交易单位

  - 模型3:百分比风险模型。总风险，每个交易标的的风险

    - 买入数量：（总资金\*总风险）/（交易标的价格\*单个交易标的的风险）

  - 模型4:百分比波动幅度模型（ATR，average true range）

    - 单个交易标的的风险：3倍ATR
    - 买入数量：（总资金\*总风险）/（交易标的价格\*单个交易标的的风险）

  - 考虑：流动性风险

    - 持仓头寸不超过该股票流通市值的2%（超过5%要举牌）
    - 日成交量不超过该股票成交量的10%
    - 需要在流动性好的时候交易
    - 商品期货（可能涉及实物交割）等保证金交易的品种，流动性风险可能会出现
      - 逼空或者逼多（查）。
      - 持仓量：对合约进行交易的意愿强弱

  - 考虑：资金

    - 单日可用资金上线

    - 单个交易标的的资金上限

    - 总可用资金上限

    - CPR公式(cash position-sizing risk): P(头寸规模)=C(总风险)/R(每股风险)

    - 确定总风险

      - 基于个人容忍度
      - 基金强制平仓线

    - 单个头寸的风险

      - 固定风险
      - 波动率

    - 预警线，大多数0.9

      清盘线，大多数0.85

      在产品合同中规定

      ![img](https://qn-st0.yuketang.cn/FurDkxu2ZTS1vQWJNPdVCxVdYcmd) 

    - 解决：

      - 最大持仓上限：一次性交易资金比例<最大持仓上限
      - 平均分配风险：预计减仓N个交易标的，每个交易标的承担风险为总风险/N，头寸数量=（总风险/N）/单个头寸风险
        - 风险分配不充分，导致资金利用不充分？

  - 头寸规模的定期调整，初始风险+持续风险

    - 每隔固定时间评估当前持仓的持续风险
    - 如果风险暴露大于总风险，则需要进行减仓
    - 加减仓
      - 价格每上涨一定幅度（如一个ATR），执行加仓一次
      - 根据新的ATR调整为相同止损位置，降低单位头寸风险
      - 保证加仓后的风险暴露<总风险

- 本福特定律：量化方式发现财务造假
  - 从实际生活中得出的数据，以1为首位的数字出现几率约为总数的三成。推广来说，越大的数，以它为首几位出现的概率越低。
  - 注意
    - 数据不能按照规律排列，如身份证号/发票编号
    - 数据不能经过人工干预——用来鉴别财报数据是否经过人工改造

蚂蚁金服：杠杆率太高了，难以长期维持





#### 金融大数据

####  Python

- 凸优化
  - 全局最小化/局部最小化
  - brute函数，fmin函数
  - 建议局部优化前先全局优化。局部最小值，可能是盆地跳跃（“basic hopping”），导致方案失败
- 逼近法（在给定区间通过回归和插值求取该函数的近似值）
  - 回归：在一维、更高维度都很有效
    - 给定一组基函数$b_d,d\in\{1,2,\cdots,D\}$，找到每个函数对应的最优参数$\alpha_1^*,\cdots,\alpha_D^*$
    - $\min_{\alpha_1,\cdots,\alpha_D}\frac{1}{I}\sum_{i=1}^I(y_i-\sum_{d=1}^D\alpha_d\cdot b_d(x_i))^2$
    - 单项式作为基函数，`Numpy.polyfit(x,f(x),deg = )`
    - 对于有噪声的数据，回归在一定程度上平均了噪声，一定程度上消除了其影响
    - 可处理*未排序数据
  - 插值：计算效率更好，但一般被限制在低维度问题上

