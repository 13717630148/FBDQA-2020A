# 第九周课堂小结 

2018012611 【2020.11.13】

## python积分和符号计算

1. 积分

   - import scipy
   - 数值积分：integrate：给定上下限求定积分
   - 通过蒙特卡洛模拟求取积分

2. 符号计算

   - import SymPy，自动化简多项式

   - 方程式solve，不保证有解

   - 积分：integrate可以求积分函数的反导数（不定积分）

     

## python高性能计算库



## 如何获取Alpha

### Alpha的实操框架：以股指和商品期货为例

- 期货只需要交保证金，就可以赚取标的上涨的钱/或亏损标的下跌的钱

- CTA(commodity trading adviser)以商品期货为主要标的的基金管理方式，CTA策略中70%左右采用趋势型

- 期权的主要交易者是金融机构，股票投资者散户居多，期货处于二者之间

  

1. 股票型alpha策略

   - 股指期货（期指）对冲：

     - 例如等市值对冲：做多（4800*300）HS300，同时做空1手IF（144万），适合中等规模资金（几十亿），对冲手段有限，容不下太大规模的资金
     - 持仓分析：超配（特定长期跑赢市场的）板块的股票，为了与HS300产生敞口，这就是alpha的来源

   - 典型的股票alpha策略收益特点：

     - 牛市初期（201501-201503）：HS300没怎么涨，但是股指期货IF已经开始涨了。升水：IF>HS300；贴水：IF<HS300。熊市IF长期处于贴水，但是在牛市初期，IF偶尔会升水。升水对于初始建仓（做空）IF有利，因为交割价是当天下午HS300的平均价，即平水交割，建仓时升水就可以在交割时赚取价差。

     - 牛市中期（201504-201506）：alpha策略收益会有所回撤。因为IF突然大幅升水，对于空方不利，因为是保证金交易，策略净值可能亏损。

     - 熊市初期：alpha策略收益基本持平。如果在熊市时alpha策略反倒有大幅增长，说明通过增加IF空头头寸来赚钱了，这是伪alpha策略的违规产品。

       

2. 商品期货策略

   - 盈亏同源，怎么赚就可能怎么赔

   - 衍生品的设计就是为了提供多种对冲手段，最好不要做单边交易…

   - 品种：常见有几十种；交易所；板块；交易规则：保证金交割，交割（原油宝），涨跌停，主力合约（久期不同，主力合约就是持仓量和交易量最大的？），报价与行情数据特点（半秒报价一次，股票/ETF3s，指数5s）

   - 商品套利交易策略：

   - 1. 配对套利：看商品品种相关性表
        - 利用基本面分析和量化方法，做跨品种套利（例如螺纹钢和热轧卷板），在价差下跌时可以做多价差，回升时再平仓。螺纹钢需求的季节性较强，它的价格变动会带动热卷价格变动（有延迟），因此会产生价差波动。
        - 小心伪相关性，看有没有背后基本面逻辑支撑。有基本面支撑的基本在板块内部。
     2. 跨期套利：近月合约和远月合约的价差，抓住下跌机会做多价差
        - 通常远月合约流动性差一些，近月合约是主力，有个机构有张大单（期货合现货），可能一下开1000手，一下把远期合约价格压下去了。
        - 光大乌龙指？
     3. 产品特性跨期：
        - 橡胶一月和九月合约的价差
        - 可能消除此套利机会的情况：橡胶生产工艺改变；知道这个套利机会的人多了
     4. 综合实例：
        - 疫情极端情况下，通过卖流动性好的产品进行补仓，卖出黄金补仓股票，导致黄金和股票同时跌；以往觉得相关性不强的板块，今年却相关性变强，导致波动性大。

     

     ### 获取Alpha的交易型策略的逻辑

     交易型策略：根据市场交易中经常出现的某种规律性现象，可以制定的相应获利策略

     - 如何判断规律是真是假？
     - 常见：多空策略；回归策略

     

     1. 多空策略
        - HANS123：从开盘到一定准备时间内，确定最高价=上轨，最低价=下轨，划定震荡区间
        - 如果之后价格突破了上轨，做多；如果之后价格突破了下轨，做空
        - 强者恒强，弱者恒弱
        - 最怕一天反向太多次，大幅波动。风控：控制一天中反向次数上限
        - 对于外汇比较有效，因为历史中外汇一天中的走势通常是发散的，但是现在也不是那么好使了…
        - 日内交易最好不要用分钟线的收盘价，最好用最高价/最低价，可以避免信号闪烁

     

     2. 回归策略——ETF套利
        - 一二级市场套利
          - ETF对应一揽子股票，可以用股票申购ETF，也可以把ETF赎回成股票
          - 反映一级市场净值的IOPV：基金份额参考净值，组合证券的实时市值
          - 套利空间：IOPV和二级市场ETF的价差，可以买入ETF，换成HS300，然后在股票市场上卖出股票；反之买300支成分股，去一级市场申购ETF，再在二级市场卖ETF。考虑交易成本
          - IOPV和二级市场的价差从何而来？
          - 不需要引入指数对冲，已经在利用价差了，比手快就行…
        - 二级市场轮动
          - 例如市场上针对HS300的ETF有好几只，在同一时间交易价和IOPV的折溢价可能有很大差别
          - 可以对折溢价套利
          - 例如159919（深市300ETF）和510300（沪市300ETF），虽然低吸高抛但是二者都是ETF多头资产，如果HS300下跌，这两个ETF都会下跌。所以需要股指期货IF对冲整个大盘的波动！
        - 期现套利
          - 交割日：期货现货价格必定收敛
          - 对股指期货和ETF，价高的做多，价低的做空，类似商品期货配对套利
          - 不需要对冲，净市值都是0，没有风险敞口

